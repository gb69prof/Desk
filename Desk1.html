<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Desk interattivo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg-app: #f4f5f7;
      --bg-canvas: #f9fafb;
      --card-bg: #ffffff;
      --accent: #3b82f6;
      --accent-soft: rgba(59, 130, 246, 0.08);
      --border-subtle: #e5e7eb;
      --text-main: #111827;
      --text-muted: #6b7280;
      --shadow-soft: 0 12px 30px rgba(15, 23, 42, 0.12);
      --radius-card: 20px;
      --radius-pill: 999px;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
      background: var(--bg-app);
    }

    body {
      display: flex;
      flex-direction: column;
    }

    .app {
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }

    /* Top bar */
    .topbar {
      height: 56px;
      padding: 0 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      backdrop-filter: blur(10px);
      background: linear-gradient(to right, rgba(248, 250, 252, 0.9), rgba(241, 245, 249, 0.9));
      border-bottom: 1px solid rgba(148, 163, 184, 0.35);
    }

    .topbar-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .app-logo {
      width: 26px;
      height: 26px;
      border-radius: 10px;
      background: radial-gradient(circle at 0 0, #a855f7, #3b82f6);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.25);
    }

    .app-title {
      font-size: 15px;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #0f172a;
    }

    .topbar-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .pill-button {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: #ffffff;
      padding: 6px 14px;
      font-size: 13px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      color: var(--text-muted);
      transition: background 0.15s ease, box-shadow 0.15s ease, transform 0.08s ease;
    }

    .pill-button:hover {
      background: #f3f4f6;
      box-shadow: 0 5px 14px rgba(148, 163, 184, 0.3);
      transform: translateY(-1px);
    }

    .pill-button span.icon {
      font-size: 15px;
      line-height: 1;
    }

    .main {
      flex: 1;
      display: flex;
      padding: 10px;
      gap: 10px;
      overflow: hidden;
    }

    .sidebar {
      width: 260px;
      min-width: 230px;
      background: #f9fafb;
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.08);
      padding: 14px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .sidebar-title {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #6b7280;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .sidebar-title span.badge {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(59, 130, 246, 0.08);
      color: #1d4ed8;
      border: 1px solid rgba(59, 130, 246, 0.2);
    }

    .tool-list {
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
    }

    .tool-button {
      border-radius: 14px;
      border: 1px solid var(--border-subtle);
      background: #ffffff;
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.06);
      padding: 8px 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      transition: background 0.12s ease, transform 0.08s ease, box-shadow 0.12s ease;
    }

    .tool-button:hover {
      background: #f3f4ff;
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(79, 70, 229, 0.18);
    }

    .tool-main {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tool-icon {
      width: 26px;
      height: 26px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
    }

    .tool-icon.text {
      background: rgba(59, 130, 246, 0.12);
      color: #1d4ed8;
    }

    .tool-icon.image {
      background: rgba(16, 185, 129, 0.12);
      color: #047857;
    }

    .tool-icon.pdf {
      background: rgba(239, 68, 68, 0.12);
      color: #b91c1c;
    }

    .tool-icon.web {
      background: rgba(234, 179, 8, 0.12);
      color: #92400e;
    }

    .tool-text-title {
      font-size: 13px;
      font-weight: 600;
    }

    .tool-text-sub {
      font-size: 11px;
      color: var(--text-muted);
    }

    .tool-badge {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px dashed rgba(148, 163, 184, 0.8);
      color: #6b7280;
    }

    .sidebar-footer {
      margin-top: auto;
      font-size: 11px;
      color: var(--text-muted);
      border-top: 1px dashed rgba(148, 163, 184, 0.6);
      padding-top: 8px;
    }

    .canvas {
      flex: 1;
      position: relative;
      border-radius: 22px;
      background:
        radial-gradient(circle at 0 0, rgba(129, 140, 248, 0.18), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(45, 212, 191, 0.18), transparent 55%),
        var(--bg-canvas);
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 18px 42px rgba(15, 23, 42, 0.2);
      overflow: hidden;
    }

    .canvas-grid {
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(to right, rgba(148, 163, 184, 0.15) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(148, 163, 184, 0.12) 1px, transparent 1px);
      background-size: 32px 32px;
      opacity: 0.35;
      pointer-events: none;
    }

    .connector-layer {
      position: absolute;
      inset: 0;
      pointer-events: auto;
      overflow: visible;
      z-index: 1;
    }

    .connector-path {
      fill: none;
      stroke: rgba(15, 23, 42, 0.45);
      stroke-width: 2;
      stroke-linecap: round;
      cursor: pointer;
      transition: stroke 0.12s ease, stroke-width 0.12s ease;
    }

    .connector-path:hover {
      stroke: var(--accent);
      stroke-width: 3;
    }

    .desk-card {
      position: absolute;
      min-width: 220px;
      min-height: 140px;
      max-width: 620px;
      background: var(--card-bg);
      border-radius: var(--radius-card);
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.35);
      transition: box-shadow 0.12s ease, transform 0.08s ease, border-color 0.12s ease;
      z-index: 2;
    }

    .desk-card.selected {
      border-color: var(--accent);
      box-shadow: 0 16px 40px rgba(59, 130, 246, 0.32);
      transform: translateY(-1px);
    }

    .card-header {
      height: 34px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 8px 0 10px;
      background: linear-gradient(to right, rgba(15, 23, 42, 0.04), rgba(148, 163, 184, 0.04));
      cursor: move;
      user-select: none;
      border-bottom: 1px solid rgba(148, 163, 184, 0.35);
      position: relative;
      z-index: 3;
    }

    .card-header-left {
      display: flex;
      align-items: center;
      gap: 8px;
      overflow: hidden;
    }

    .card-type-icon {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
    }

    .card-type-text { background: rgba(59, 130, 246, 0.15); color: #1d4ed8; }
    .card-type-image { background: rgba(16, 185, 129, 0.15); color: #047857; }
    .card-type-pdf { background: rgba(239, 68, 68, 0.16); color: #b91c1c; }
    .card-type-web { background: rgba(234, 179, 8, 0.15); color: #92400e; }

    .card-title {
      font-size: 12px;
      font-weight: 500;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
      max-width: 140px;
    }

    .card-header-actions {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .icon-button {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      border: none;
      background: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 13px;
      color: #6b7280;
      transition: background 0.12s ease, color 0.12s ease, transform 0.08s ease;
    }

    .icon-button:hover {
      background: rgba(148, 163, 184, 0.25);
      color: #111827;
      transform: translateY(-0.5px);
    }

    .icon-button.danger:hover {
      background: rgba(248, 113, 113, 0.16);
      color: #b91c1c;
    }

    .card-body {
      flex: 1;
      padding: 8px 10px 8px 10px;
      overflow: hidden;
      display: flex;
      align-items: stretch;
      justify-content: stretch;
      position: relative;
      z-index: 2;
    }

    .card-body-inner {
      width: 100%;
      height: 100%;
      overflow: auto;
      border-radius: 12px;
    }

    .card-text-content {
      width: 100%;
      min-height: 80px;
      padding: 6px 6px 10px 6px;
      font-size: 13px;
      line-height: 1.5;
      outline: none;
      border-radius: 10px;
      border: 1px solid rgba(209, 213, 219, 0.8);
      background: #f9fafb;
    }

    .card-text-content:focus {
      background: #ffffff;
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.25);
    }

    .card-embed, .card-iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
      border-radius: 12px;
      background: #111827;
    }

    .card-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 12px;
      display: block;
      background: #020617;
    }

    .resize-handle {
      position: absolute;
      width: 16px;
      height: 16px;
      right: 6px;
      bottom: 6px;
      border-radius: 4px;
      background: rgba(15, 23, 42, 0.06);
      border: 1px solid rgba(148, 163, 184, 0.9);
      cursor: se-resize;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: #6b7280;
      backdrop-filter: blur(4px);
      z-index: 4;
    }

    .resize-handle::before {
      content: "";
      width: 8px;
      height: 8px;
      border-right: 1px solid rgba(107, 114, 128, 0.9);
      border-bottom: 1px solid rgba(107, 114, 128, 0.9);
      transform: translate(1px, 1px);
    }

    .connector-handle {
      position: absolute;
      width: 12px;
      height: 12px;
      right: -6px;
      top: 50%;
      transform: translateY(-50%);
      border-radius: 999px;
      background: var(--accent-soft);
      border: 1px solid rgba(59, 130, 246, 0.7);
      cursor: crosshair;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 5;
      box-shadow: 0 0 0 2px rgba(248, 250, 252, 0.9);
    }

    .connector-handle::before {
      content: "";
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: #3b82f6;
    }

    .desk-card.collapsed {
      height: 46px !important;
    }

    .desk-card.collapsed .card-body { display: none; }
    .desk-card.collapsed .resize-handle { display: none; }

    input[type="file"] { display: none; }

    @media (max-width: 900px) {
      .sidebar { display: none; }
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="topbar-left">
        <div class="app-logo"></div>
        <div class="app-title">Desk interattivo</div>
      </div>
      <div class="topbar-right">
        <button class="pill-button" id="btn-clear">
          <span class="icon">ðŸ§¹</span><span>Nuovo desk</span>
        </button>
      </div>
    </header>

    <main class="main">
      <aside class="sidebar">
        <div class="sidebar-title">
          Strumenti
          <span class="badge">Desk</span>
        </div>
        <div class="tool-list">
          <button class="tool-button" id="tool-text">
            <div class="tool-main">
              <div class="tool-icon text">T</div>
              <div>
                <div class="tool-text-title">Nota di testo</div>
                <div class="tool-text-sub">Appunti, idee, schemi</div>
              </div>
            </div>
            <div class="tool-badge">TXT</div>
          </button>
        </div>
        <div class="sidebar-footer">
          âžœ Le card si spostano, si ridimensionano e si collegano.<br>
          âžœ Click sul pallino blu per creare connettori.
        </div>
      </aside>

      <section class="canvas" id="canvas">
        <svg id="connector-layer" class="connector-layer" xmlns="http://www.w3.org/2000/svg"></svg>
        <div class="canvas-grid"></div>
      </section>
    </main>
  </div>

  <script>
    (function() {
      var canvas = document.getElementById('canvas');
      var connectorLayer = document.getElementById('connector-layer');
      var toolText = document.getElementById('tool-text');
      var btnClear = document.getElementById('btn-clear');

      var zIndexCounter = 10;
      var cardIdCounter = 0;
      var currentSelectedCard = null;

      var connectors = [];
      var connectorStartCard = null;

      function bringToFront(card) {
        zIndexCounter++;
        card.style.zIndex = zIndexCounter;
        if (currentSelectedCard && currentSelectedCard !== card) {
          currentSelectedCard.classList.remove('selected');
        }
        card.classList.add('selected');
        currentSelectedCard = card;
        updateConnectors();
      }

      function toggleCollapse(card, btn) {
        var isCollapsed = card.classList.contains('collapsed');
        if (isCollapsed) {
          card.classList.remove('collapsed');
          if (card.dataset.prevHeight) {
            card.style.height = card.dataset.prevHeight;
          }
          btn.innerHTML = 'â–¾';
        } else {
          card.dataset.prevHeight = card.style.height || (card.getBoundingClientRect().height + 'px');
          card.classList.add('collapsed');
          btn.innerHTML = 'â–´';
        }
        updateConnectors();
      }

      function centerCard(card) {
        var rect = canvas.getBoundingClientRect();
        var cardRect = card.getBoundingClientRect();
        var left = rect.left + (rect.width - cardRect.width) / 2;
        var top = rect.top + (rect.height - cardRect.height) / 2;
        card.style.left = (left - rect.left) + 'px';
        card.style.top = (top - rect.top) + 'px';
        updateConnectors();
      }

      function makeDraggable(card, handle) {
        var isDragging = false;
        var startX = 0;
        var startY = 0;
        var initialLeft = 0;
        var initialTop = 0;

        handle.addEventListener('mousedown', function(e) {
          if (e.button !== 0) return;
          isDragging = true;
          bringToFront(card);
          startX = e.clientX;
          startY = e.clientY;
          var rect = card.getBoundingClientRect();
          var canvasRect = canvas.getBoundingClientRect();
          initialLeft = rect.left - canvasRect.left;
          initialTop = rect.top - canvasRect.top;
          document.addEventListener('mousemove', onMouseMove);
          document.addEventListener('mouseup', onMouseUp);
          e.preventDefault();
        });

        function onMouseMove(e) {
          if (!isDragging) return;
          var dx = e.clientX - startX;
          var dy = e.clientY - startY;
          card.style.left = (initialLeft + dx) + 'px';
          card.style.top = (initialTop + dy) + 'px';
          updateConnectors();
        }

        function onMouseUp() {
          if (!isDragging) return;
          isDragging = false;
          document.removeEventListener('mousemove', onMouseMove);
          document.removeEventListener('mouseup', onMouseUp);
        }
      }

      function makeResizable(card, handle) {
        var isResizing = false;
        var startX = 0;
        var startY = 0;
        var startWidth = 0;
        var startHeight = 0;

        handle.addEventListener('mousedown', function(e) {
          if (e.button !== 0) return;
          isResizing = true;
          bringToFront(card);
          startX = e.clientX;
          startY = e.clientY;
          var rect = card.getBoundingClientRect();
          startWidth = rect.width;
          startHeight = rect.height;
          document.addEventListener('mousemove', onMouseMove);
          document.addEventListener('mouseup', onMouseUp);
          e.preventDefault();
          e.stopPropagation();
        });

        function onMouseMove(e) {
          if (!isResizing) return;
          var dx = e.clientX - startX;
          var dy = e.clientY - startY;
          var newWidth = Math.max(220, startWidth + dx);
          var newHeight = Math.max(140, startHeight + dy);
          card.style.width = newWidth + 'px';
          card.style.height = newHeight + 'px';
          updateConnectors();
        }

        function onMouseUp() {
          if (!isResizing) return;
          isResizing = false;
          document.removeEventListener('mousemove', onMouseMove);
          document.removeEventListener('mouseup', onMouseUp);
        }
      }

      function handleConnectorClick(card) {
        if (!connectorStartCard) {
          connectorStartCard = card;
          bringToFront(card);
        } else if (connectorStartCard === card) {
          connectorStartCard = null;
        } else {
          createConnector(connectorStartCard, card);
          connectorStartCard = null;
        }
      }

      function createConnector(fromCard, toCard) {
        var fromId = fromCard.dataset.cardId;
        var toId = toCard.dataset.cardId;
        if (!fromId || !toId || fromId === toId) return;

        var already = false;
        for (var i = 0; i < connectors.length; i++) {
          if (connectors[i].fromId === fromId && connectors[i].toId === toId) {
            already = true;
            break;
          }
        }
        if (already) return;

        var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('class', 'connector-path');
        var id = 'conn-' + Date.now() + '-' + Math.random().toString(36).slice(2);
        path.setAttribute('data-connector-id', id);
        connectorLayer.appendChild(path);

        var conn = { id: id, fromId: fromId, toId: toId, pathEl: path };
        connectors.push(conn);

        path.addEventListener('contextmenu', function(e) {
          e.preventDefault();
          removeConnectorById(id);
        });

        updateConnectors();
      }

      function removeConnectorById(id) {
        var remaining = [];
        for (var i = 0; i < connectors.length; i++) {
          var c = connectors[i];
          if (c.id === id) {
            if (c.pathEl && c.pathEl.parentNode) {
              c.pathEl.parentNode.removeChild(c.pathEl);
            }
          } else {
            remaining.push(c);
          }
        }
        connectors = remaining;
      }

      function removeConnectorsForCard(cardId) {
        var remaining = [];
        for (var i = 0; i < connectors.length; i++) {
          var c = connectors[i];
          if (c.fromId === cardId || c.toId === cardId) {
            if (c.pathEl && c.pathEl.parentNode) {
              c.pathEl.parentNode.removeChild(c.pathEl);
            }
          } else {
            remaining.push(c);
          }
        }
        connectors = remaining;
      }

      function updateConnectors() {
        var canvasRect = canvas.getBoundingClientRect();
        var toRemove = [];

        for (var i = 0; i < connectors.length; i++) {
          var conn = connectors[i];
          var fromCard = canvas.querySelector('.desk-card[data-card-id="' + conn.fromId + '"]');
          var toCard = canvas.querySelector('.desk-card[data-card-id="' + conn.toId + '"]');

          if (!fromCard || !toCard) {
            toRemove.push(conn.id);
            continue;
          }

          var fromRect = fromCard.getBoundingClientRect();
          var toRect = toCard.getBoundingClientRect();

          var startX = fromRect.right - canvasRect.left;
          var startY = fromRect.top + fromRect.height / 2 - canvasRect.top;
          var endX = toRect.left - canvasRect.left;
          var endY = toRect.top + toRect.height / 2 - canvasRect.top;

          var offset = Math.max(40, Math.abs(endX - startX) / 3);

          var d = 'M ' + startX + ' ' + startY +
                  ' C ' + (startX + offset) + ' ' + startY +
                  ' ' + (endX - offset) + ' ' + endY +
                  ' ' + endX + ' ' + endY;

          conn.pathEl.setAttribute('d', d);
        }

        for (var j = 0; j < toRemove.length; j++) {
          removeConnectorById(toRemove[j]);
        }
      }

      window.addEventListener('resize', updateConnectors);

      function createCardBase(type, title) {
        var card = document.createElement('div');
        card.className = 'desk-card';
        card.dataset.cardId = String(++cardIdCounter);
        card.dataset.type = type;
        card.style.left = (40 + Math.random() * 80) + 'px';
        card.style.top = (40 + Math.random() * 80) + 'px';
        card.style.width = '320px';
        card.style.height = type === 'text' ? '200px' : '260px';
        card.style.zIndex = zIndexCounter;

        var header = document.createElement('div');
        header.className = 'card-header';

        var headerLeft = document.createElement('div');
        headerLeft.className = 'card-header-left';

        var icon = document.createElement('div');
        icon.className = 'card-type-icon';
        if (type === 'text') icon.classList.add('card-type-text');
        icon.textContent = type === 'text' ? 'T' : '?';

        var titleEl = document.createElement('div');
        titleEl.className = 'card-title';
        titleEl.textContent = title || 'Nota';

        headerLeft.appendChild(icon);
        headerLeft.appendChild(titleEl);

        var headerActions = document.createElement('div');
        headerActions.className = 'card-header-actions';

        var toggleButton = document.createElement('button');
        toggleButton.className = 'icon-button';
        toggleButton.title = 'Apri/chiudi contenuto';
        toggleButton.innerHTML = 'â–¾';

        var centerButton = document.createElement('button');
        centerButton.className = 'icon-button';
        centerButton.title = 'Centra nel desk';
        centerButton.innerHTML = 'â—';

        var closeButton = document.createElement('button');
        closeButton.className = 'icon-button danger';
        closeButton.title = 'Elimina';
        closeButton.innerHTML = 'âœ•';

        headerActions.appendChild(toggleButton);
        headerActions.appendChild(centerButton);
        headerActions.appendChild(closeButton);

        header.appendChild(headerLeft);
        header.appendChild(headerActions);

        var body = document.createElement('div');
        body.className = 'card-body';

        var bodyInner = document.createElement('div');
        bodyInner.className = 'card-body-inner';
        body.appendChild(bodyInner);

        var resize = document.createElement('div');
        resize.className = 'resize-handle';

        var connectorHandle = document.createElement('div');
        connectorHandle.className = 'connector-handle';

        card.appendChild(header);
        card.appendChild(body);
        card.appendChild(resize);
        card.appendChild(connectorHandle);

        canvas.appendChild(card);

        makeDraggable(card, header);
        makeResizable(card, resize);

        card.addEventListener('mousedown', function() {
          bringToFront(card);
        });

        toggleButton.addEventListener('click', function(e) {
          e.stopPropagation();
          toggleCollapse(card, toggleButton);
        });

        header.addEventListener('dblclick', function(e) {
          e.stopPropagation();
          toggleCollapse(card, toggleButton);
        });

        centerButton.addEventListener('click', function(e) {
          e.stopPropagation();
          centerCard(card);
        });

        closeButton.addEventListener('click', function(e) {
          e.stopPropagation();
          var id = card.dataset.cardId;
          removeConnectorsForCard(id);
          card.remove();
          if (currentSelectedCard === card) currentSelectedCard = null;
          updateConnectors();
        });

        connectorHandle.addEventListener('click', function(e) {
          e.stopPropagation();
          handleConnectorClick(card);
        });

        return { card: card, bodyInner: bodyInner };
      }

      function createTextCard(initialText) {
        var base = createCardBase('text', 'Nota');
        var card = base.card;
        var bodyInner = base.bodyInner;
        var textarea = document.createElement('div');
        textarea.className = 'card-text-content';
        textarea.contentEditable = 'true';
        textarea.innerHTML = initialText || '';
        bodyInner.appendChild(textarea);
        bringToFront(card);
        updateConnectors();
        return card;
      }

      toolText.addEventListener('click', function() {
        createTextCard('Scrivi qui la tua notaâ€¦');
      });

      btnClear.addEventListener('click', function() {
        var cards = canvas.querySelectorAll('.desk-card');
        for (var i = 0; i < cards.length; i++) {
          cards[i].remove();
        }
        for (var j = 0; j < connectors.length; j++) {
          var c = connectors[j];
          if (c.pathEl && c.pathEl.parentNode) {
            c.pathEl.parentNode.removeChild(c.pathEl);
          }
        }
        connectors = [];
        currentSelectedCard = null;
        connectorStartCard = null;
      });

      // crea una nota di esempio all'avvio
      window.addEventListener('load', function() {
        createTextCard('Questa card si sposta, si ridimensiona e puÃ² essere collegata ad altre.');
      });
    })();
  </script>
</body>
</html>
